# wikitabia-server
Сервер проекта Wikitabia.

## Эпилог
Стажировочный проект компании Интабия.
Приглашаются все желающие попробовать свои силы в OpenSource разработке,
получить обратную свзяь от профессиональных разработчиков, составить себе
обьектитвное портфолио к резюме начинающего Java-разработчика. С чего начать смотри [тут](./CONTRIBUTING.md).

## О чём проект
Wikitabia - веб сервер для сохранения полезных ссылок на технические материалы
с возможностью маркировать ссылку некоторым тэгом и в дальнейшем получать по тэгам
полезные материалы.

## Что уже можем

Веб сервер для ведения полезных веб ссылок, который может:
1) Регистрировать новых пользователей
2) Авторизировать текущих пользователей
3) Предоставляет административный интерфейс для CRUD операций над веб ссылками и пользователями
4) Предоставляет CRUD API для клиентских приложений, таких как [telegram wikibot](https://github.com/intabia-intership/wikitabia-telegram-bot) и веб сайт.

## Видение развития проекта

1) Стабилизировать первую рабочию версию проекта для разворачивания полноценного продакшен-реди сервера
2) Настроить правила модерации материалов и участников с их уровнем доступа. Ограничить возможность добавления материалов только для ответсвенных участников и открыть доступ к материалам для всех.
3) Открыть развёрнутое продакшен решение для всех
4) Развивать продукт по обратной свзяи от пользователей

## Как собрать и запустить

Подготовь окружение:
1) Jdk 11
2) Maven 3
3) Docker 20.10.16 + docker-compose-plugin

Собери проект
1) `mvn clean install`

Собери docker образ
1) `docker build . -t wikitabia`

Отредактируй переменные окружения в файле [.env](.env) , если необходимо:
1) DB_NAME - наименование БД
2) DB_USER - логин пользователя БД
3) DB_PASS - пароль пользователя БД
4) DB_PORT - порт БД
5) WIKITABIA_SERVER_IMAGE_NAME - наименование docker образа
6) WIKITABIA_SERVER_IMAGE_TAG - тэг docker образа

Подними docker контейнеры
1) `docker compose up -d`

## Как проверить, что после моих изменений ничего не сломалось

1) Добавь тест на новые изменения
2) Собери проект с запуском тестов

## CI/CD
Реализован через Github Actions
1) Workflow [cборка с тестами](.github/workflows/build.yml)  
При push и создании pull request в любую ветку, кроме `main` - прогоняется сборка с тестами.
2) Workflow [синхронизация с гитлаб](.github/workflows/main.yml)  
При push в любую ветку, кроме `main` - выполняется синхронизация с гитлаб.
3) Workflow [сборка и доставка](.github/workflows/build_and_delivery_dev.yml)  
При push в ветку `main`:
- прогоняется сборка с тестами
- выполняется сборка docker образа и его публикация в docker registry
- выполняется синхронизация с гитлаб  

Deploy на стенд производится через GitLab CI/CD.